% mini theme (casual)

%% \newif\if@doMyOption
%% \@doMyOptionfalse
%% \DeclareOption{myoption}{\@doMyOptiontrue}
%% \ProcessOptions

%% \DeclareOptionBeamer{ftitlesize}{\def\beamer@minicasual@ftitlesize{#1}}
%% \ExecuteOptionsBeamer{ftitlesize=large} % default value
%% \ProcessOptionsBeamer

% packages
%% \RequirePackage[no-math]{fontspec}

\usepackage[none]{hyphenat}
\usepackage{etex}
\usepackage[utf8]{inputenc}
%%\usepackage[spanish]{babel}
\usepackage{amsmath,amsfonts,amssymb}
\usepackage{fancyhdr}
\usepackage{float}
\usepackage{microtype}
\usepackage{hyperref} % links
\usepackage{pstricks,pst-grad}
\usepackage[percent]{overpic}
\usepackage[absolute,overlay]{textpos}

\usepackage{tikz}
\usetikzlibrary{calc,arrows,shapes,shadows,positioning}

\input{minicommon.tex}

\renewcommand{\arraystretch}{1.5}
\setbeamersize{text margin left=0.25cm}
\setbeamersize{text margin right=0.25cm}

%% fonts
\ifboolexpr{bool {xetex} or bool {luatex}}{
  \@ifpackageloaded{fontspec}{
    \PassOptionsToPackage{no-math}{fontspec}
  }{
    \RequirePackage[no-math]{fontspec}
  }
  \newcounter{fontsnotfound}
  \newcommand{\checkfont}[1]{%
    \suppressfontnotfounderror=1%
    \font\x = "#1" at 10pt
    \selectfont
    \ifx\x\nullfont%
      \stepcounter{fontsnotfound}%
    \fi%
    \suppressfontnotfounderror=0%
  }

  \newcommand{\iffontsavailable}[3]{%
    \setcounter{fontsnotfound}{0}%
    \expandafter\forcsvlist\expandafter%
    \checkfont\expandafter{#1}%
    \ifnum\value{fontsnotfound}=0%
      #2%
    \else%
      #3%
    \fi%
  }
  \iffontsavailable{Fira Sans Light,%
                    Fira Sans Light Italic,%
                    Fira Sans,%
                    Fira Sans Italic}%
  {%
    \setsansfont[ItalicFont={Fira Sans Light Italic},%
                 BoldFont={Fira Sans},%
                 BoldItalicFont={Fira Sans Italic}]%
                {Fira Sans Light}%
  }{%
    \iffontsavailable{Fira Sans Light OT,%
                      Fira Sans Light Italic OT,%
                      Fira Sans OT,%
                      Fira Sans Italic OT}%
    {%
      \setsansfont[ItalicFont={Fira Sans Light Italic OT},%
                   BoldFont={Fira Sans OT},%
                   BoldItalicFont={Fira Sans Italic OT}]%
                  {Fira Sans Light OT}%
    }{%
      \PackageWarning{beamerthememetropolis}{%
        Could not find Fira Sans fonts%
      }
    }
  }
  \iffontsavailable{Fira Mono, Fira Mono Bold}{%
    \setmonofont[BoldFont={Fira Mono Medium}]{Fira Mono}%
  }{%
    \iffontsavailable{Fira Mono OT, Fira Mono Bold OT}{%
      \setmonofont[BoldFont={Fira Mono Medium OT}]{Fira Mono OT}%
    }{%
      \PackageWarning{beamerthememetropolis}{%
        Could not find Fira Mono fonts%
      }
    }
  }
  \AtBeginEnvironment{tabular}{%
    \addfontfeature{Numbers={Monospaced}}%
  }
}{%
  \PackageWarning{beamerthememetropolis}{%
    You need to compile with XeLaTeX or LuaLaTeX to use the Fira fonts%
  }
  \usepackage{raleway}
}

%% \usefonttheme{profe%% ssionalfonts}
%% \usefonttheme{serif}
%% \usepackage{fontspec}
%% \setmainfont{Roboto}

%% \setsansfont[ItalicFont={Fira Sans Light Italic}, BoldFont={Fira Sans}, BoldItalicFont={Fira Sans Italic}]{Fira Sans Light}
%% \setmonofont[BoldFont={Fira Mono Medium}]{Fira Mono}

%% \AtBeginEnvironment{tabular}{%
%%   \addfontfeature{Numbers={Monospaced}}%
%% }

%%\renewcommand\mathfamilydefault{\rmdefault}

\setbeamerfont{title}{size=\fontsize{26}{22}, series=\bfseries}
\setbeamerfont{author}{size=\normalsize}
\setbeamerfont{date}{size=\normalsize}
\setbeamerfont{subtitle}{size=\large}

\setbeamerfont{frametitle}{size=\LARGE, series=\bfseries}
\setbeamerfont{page number in head/foot}{size=\tiny}


\setbeamerfont{itemize/enumerate body}{size=\normalsize}
\setbeamerfont{itemize/enumerate subbody}{size=\normalsize}
\setbeamerfont{itemize/enumerate subsubbody}{size=\small}

\setbeamerfont{section title}{size=\Large,%
                              series=\bfseries}
\setbeamerfont{block title}{size=\normalsize,%
                            series=\bfseries}
\setbeamerfont{block title alerted}{size=\normalsize,%
                                    series=\bfseries}



% colours
\setbeamercolor{title}{fg=mini-blue}
\setbeamercolor{author}{fg=mini-black}

\setbeamercolor{frametitle}{fg=mini-blue, bg=mini-white}
\setbeamercolor{footline}{fg=mini-black, bg=mini-white}

\setbeamercolor{enumerate item}{fg=mini-blue}
\setbeamercolor{section in toc}{fg=mini-black}
\setbeamercolor{normal text}{fg=mini-black}

\setbeamertemplate{itemize item}{\icircle{mini-blue}}
\setbeamertemplate{itemize subitem}{\icircle{mini-grey}}
\setbeamertemplate{itemize subsubitem}{\iemptycircle{mini-blue}}

\setlength\labelsep   {\dimexpr\labelsep - 0.4em\relax}
\setlength\leftmargini{\dimexpr\leftmargini - 0.4em\relax}

\setbeamertemplate{block begin}{%
  \vspace*{1ex}
  \begin{beamercolorbox}[%
    ht=2.4ex,
    dp=1ex,
    leftskip=1ex,
    rightskip=2ex]{block title}
    \usebeamerfont{block title}\insertblocktitle
  \end{beamercolorbox}%
  \vspace*{-2pt}
  \begin{beamercolorbox}[%
    dp=1ex,
    leftskip=1ex,
    rightskip=1ex,
    vmode]{block body}%
    \usebeamerfont{block body}%
}
\setbeamertemplate{block end}{%
  \end{beamercolorbox}
 \vspace*{0.2ex}
}

\addtobeamertemplate{block begin}{%
  \setbeamercolor{itemize item}{fg=mini-black}
  \setbeamertemplate{itemize item}{-}
}{}

% disable navigation
\setbeamertemplate{navigation symbols}{}

% custom draw the title page above
\setbeamertemplate{title page}{}

% again, manually draw the frame title above
\setbeamertemplate{frametitle}{}

% disable "Figure:" in the captions
\setbeamertemplate{caption}{\tiny\insertcaption}
\setbeamertemplate{caption label separator}{}


% make the progress bar go across the screen
\newdimen\slidewidth % auxiliary dimension
\newdimen\slideheight % auxiliary dimension
\slidewidth=\the\paperwidth
\slideheight=\the\paperheight

\setbeamertemplate{headline}{}

\setbeamertemplate{footline}{
  \hfill%
  \begin{beamercolorbox}[wd=1cm, sep=1.2ex, right, ignorebg]{footline}%
    \usebeamerfont{page number in head/foot}%
    \insertframenumber/\inserttotalframenumber
  \end{beamercolorbox}%
}

\setbeamertemplate{frametitle}{
  \nointerlineskip%
  \begin{beamercolorbox}[wd=\paperwidth, sep=4pt, leftskip=0.2cm, rightskip=0.2cm]{frametitle}%
  \insertframetitle%
  \end{beamercolorbox}%
  \vspace*{-0.1cm}%
}


%% \makeatletter
\setbeamertemplate{title page}{%
  \hspace*{-\beamer@leftmargin}%
  \begin{tikzpicture}
    \useasboundingbox (0,0) rectangle (\slidewidth,\slideheight);
    \fill[color=mini-white] (0,0) rectangle(\the\paperwidth,\the\paperheight);

    \ifx\inserttitle\@empty\else%
    \node[anchor=south west, text width=\slidewidth-1cm, inner sep=0, outer sep=0, font=\usebeamerfont{title}, color=mini-blue] at (0.5cm, 5cm) {\baselineskip=1.25cm\inserttitle\par};%
    \fi
    \ifx\insertsubtitle\@empty\else%
    \node[anchor=south west, text width=\slidewidth-1cm, inner sep=0, outer sep=0, font=\usebeamerfont{subtitle}] at (0.5cm, 4cm) {\baselineskip=1.25cm\insertsubtitle\par};%
    \fi
    \ifx\author\@empty\else
    \node[anchor=south west,align=left,color=mini-black,font=\usebeamerfont{author}] at (0.5cm,3cm) {\insertauthor};
    \fi
    \ifx\insertinstitute\@empty\else
    \node[anchor=south west,align=left,color=mini-black] at (0.5cm,2.5cm) {\insertinstitute};
    \fi
    \ifx\insertshortdate\@empty\else
    \node[anchor=south west,align=left,color=mini-black] at (0.5cm,1.0cm) {\insertshortdate};
    \fi
    \ifx\insertdate\@empty\else
    \node[anchor=south west,align=left,color=mini-black] at (0.5cm,0.5cm) {\insertdate};
    \fi
    \ifx\inserttitlegraphic\@empty\else
    \node[anchor=south east] at (\slidewidth-0.5cm,0.5cm) {\inserttitlegraphic};
    \fi
  \end{tikzpicture}%
}
%% \makeatother
