% mini theme (casual)

% packages
\usepackage[none]{hyphenat}
\usepackage{etex}
\usepackage[utf8]{inputenc}
%%\usepackage[spanish]{babel}
\usepackage{amsmath,amsfonts,amssymb}
\usepackage{fancyhdr}
\usepackage{float}
%%\usepackage{graphicx}
\usepackage{microtype}
\usepackage{hyperref} % links
\usepackage{pstricks,pst-grad}
\usepackage[percent]{overpic}
\usepackage[absolute,overlay]{textpos}

\usepackage{tikz}
\usetikzlibrary{calc,arrows,shapes,shadows,positioning}

\input{minicommon.tex}

\renewcommand{\arraystretch}{1.5}
\setbeamersize{text margin left=0.2cm}
\setbeamersize{text margin right=0.2cm}

%% fonts
\usepackage[default]{raleway}
%%\renewcommand\mathfamilydefault{\rmdefault}
%% \renewcommand\familydefault{\rmdefault}
%% \setbeamerfont{title}{size=\fontsize{30}{32}}
%% %% \setbeamerfont{author}{family*={fouriernc}, size=\large}
\setbeamerfont{itemize/enumerate body}{size=\normalsize}
\setbeamerfont{itemize/enumerate subbody}{size=\normalsize}
\setbeamerfont{itemize/enumerate subsubbody}{size=\small}

% set colours
\setbeamercolor{enumerate item}{fg=mini-blue}
\setbeamercolor{section in toc}{fg=mini-black}
\setbeamercolor{normal text}{fg=mini-black}

\setbeamertemplate{itemize item}{\icircle{mini-blue}}
\setbeamertemplate{itemize subitem}{\icircle{mini-grey}}
\setbeamertemplate{itemize subsubitem}{\iemptycircle{mini-blue}}

\setlength\labelsep   {\dimexpr\labelsep - 0.4em\relax}
\setlength\leftmargini{\dimexpr\leftmargini - 0.4em\relax}

\setbeamertemplate{block begin}{%
  \vspace*{1ex}
  \begin{beamercolorbox}[%
    ht=2.4ex,
    dp=1ex,
    leftskip=1ex,
    rightskip=2ex]{block title}
    \usebeamerfont{block title}\insertblocktitle
  \end{beamercolorbox}%
  \vspace*{-2pt}
  \begin{beamercolorbox}[%
    dp=1ex,
    leftskip=1ex,
    rightskip=1ex,
    vmode]{block body}%
    \usebeamerfont{block body}%
}
\setbeamertemplate{block end}{%
  \end{beamercolorbox}
 \vspace*{0.2ex}
}

\addtobeamertemplate{block begin}{%
  \setbeamercolor{itemize item}{fg=mini-black}
  \setbeamertemplate{itemize item}{-}
}{}

% disable navigation
\setbeamertemplate{navigation symbols}{}

% custom draw the title page above
\setbeamertemplate{title page}{}

% again, manually draw the frame title above
\setbeamertemplate{frametitle}{}

% disable "Figure:" in the captions
\setbeamertemplate{caption}{\tiny\insertcaption}
\setbeamertemplate{caption label separator}{}


% make the progress bar go across the screen
\newdimen\slidewidth % auxiliary dimension
\newdimen\slideheight % auxiliary dimension
\slidewidth=\the\paperwidth
\slideheight=\the\paperheight

\setbeamertemplate{footline}{

  \begin{tikzpicture}

    \draw[fill=mini-white,draw=none] (0cm,0cm) rectangle (\slidewidth,0.05cm);

    \node[anchor=south east,color=mini-darkgrey,font=\tiny,scale=1] at (\slidewidth,0.08cm) {\insertframenumber/\inserttotalframenumber};%

  \end{tikzpicture}

}

\setbeamertemplate{headline}{}
\setbeamertemplate{frametitle}{
  \begin{tikzpicture}
    % title bar
    \fill[color=mini-white] (0cm, \slideheight-1cm) rectangle (\slidewidth,\slideheight);
    \node[anchor=north west,text width=\slidewidth-1cm,font=\Huge\bf,inner ysep=0.25cm,color=mini-blue] at (0,\slideheight) {\insertframetitle};
  \end{tikzpicture}
}


\makeatletter
\setbeamertemplate{title page}{%
  \hspace*{-\beamer@leftmargin}%
  \begin{tikzpicture}
    % set up the entire slide as the canvas
    \useasboundingbox (0,0) rectangle (\slidewidth,\slideheight);

    % the background
    \fill[color=mini-white] (0,0) rectangle(\the\paperwidth,\the\paperheight);

    % draw the actual text
    \node[anchor=south west,text width=\slidewidth-1cm,inner sep=0, outer sep=0, font=\fontsize{22}{20}\selectfont\bf, color=mini-blue] at (0.5cm,5cm) {\baselineskip=1.25cm\inserttitle\par};

    \ifx\author\@empty\else
    \node[anchor=south west,align=left,color=mini-black,font=\normalsize] at (0.5cm,3cm) {\insertauthor};
    \fi
    \ifx\insertinstitute\@empty\else
    \node[anchor=south west,align=left,color=mini-black] at (0.5cm,2.5cm) {\insertinstitute};
    \fi
    \ifx\insertshortdate\@empty\else
    \node[anchor=south west,align=left,color=mini-black] at (0.5cm,1.0cm) {\insertshortdate};
    \fi
    \ifx\insertdate\@empty\else
    \node[anchor=south west,align=left,color=mini-black] at (0.5cm,0.5cm) {\insertdate};
    \fi
    \ifx\inserttitlegraphic\@empty\else
    \node[anchor=south east] at(\slidewidth-0.5cm,0.5cm) {\inserttitlegraphic};
    \fi
  \end{tikzpicture}%
}
\makeatother
